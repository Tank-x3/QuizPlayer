<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz App Manager</title>
    <link rel="stylesheet" href="css/creator.css">
    <style>
        /* Custom styles for Manager */
        body {
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        header {
            border-radius: 0;
            margin: 0;
        }

        .tabs {
            display: flex;
            background: #333;
            color: white;
        }

        .tab {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom-color: #4a90e2;
            background: #444;
        }

        .tab:hover {
            background: #555;
        }

        .tab-content {
            display: none;
            padding: 20px;
            flex: 1;
            overflow-y: auto;
        }

        .tab-content.active {
            display: block;
        }

        .file-list {
            border: 1px solid #ccc;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .file-list-item {
            padding: 5px 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-list-item:hover {
            background: #f0f0f0;
        }

        .file-list-item.selected {
            background: #e0eaff;
        }

        .form-actions {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
            text-align: right;
        }

        /* Category Manager Styles */
        #category-list {
            list-style: none;
            padding: 0;
            max-width: 600px;
            margin: 20px 0;
        }

        #category-list li {
            padding: 10px;
            border: 1px solid #ddd;
            margin-bottom: 5px;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #category-list li.dragging {
            opacity: 0.5;
        }

        /* Integrity Checker Styles */
        .check-result {
            padding: 10px;
            margin-top: 5px;
            border-radius: 4px;
        }

        .check-result.ok {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .check-result.error {
            background: #ffebee;
            color: #c62828;
        }

        .check-result.warning {
            background: #fff3e0;
            color: #ef6c00;
        }
    </style>
</head>

<body>
    <div class="tabs">
        <div class="tab active" data-tab="quiz-editor">ã‚¯ã‚¤ã‚ºç·¨é›†</div>
        <div class="tab" data-tab="category-manager">ã‚«ãƒ†ã‚´ãƒªç®¡ç†</div>
        <div class="tab" data-tab="integrity-checker">æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯</div>
    </div>

    <!-- Quiz Editor Tab -->
    <div id="quiz-editor" class="tab-content active">
        <div style="display: flex; gap: 20px; height: 100%;">
            <div
                style="width: 300px; border-right: 1px solid #eee; padding-right: 20px; display: flex; flex-direction: column;">
                <h3>ã‚¯ã‚¤ã‚ºä¸€è¦§</h3>
                <div id="quiz-file-list" class="file-list" style="flex: 1;"></div>
                <button id="refresh-files-btn">æ›´æ–°</button>
                <button id="create-new-quiz-btn" class="primary-action">æ–°è¦ä½œæˆ</button>
                <div style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
                    <label class="file-label"
                        style="cursor: pointer; background: #eee; padding: 5px 10px; border-radius: 4px; display: inline-block;">
                        ğŸ“ å¤–éƒ¨JSONã‚’èª­è¾¼
                        <input type="file" id="import-json-file" accept=".json" style="display: none;">
                    </label>
                </div>
            </div>
            <div style="flex: 1; overflow-y: auto; position: relative;">
                <form id="quiz-form">
                    <div class="sticky-header"
                        style="position: sticky; top: 0; background: white; z-index: 100; padding-bottom: 10px; border-bottom: 2px solid #eee; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="margin: 0;">åŸºæœ¬æƒ…å ± <span id="current-filename"
                                style="font-size: 0.6em; color: gray; font-weight: normal;"></span></h2>
                        <div>
                            <button type="button" id="delete-quiz-btn"
                                style="background-color: #c62828; margin-right: 10px;">å‰Šé™¤</button>
                            <button type="button" id="save-quiz-btn" class="primary-action">ä¿å­˜ã™ã‚‹</button>
                        </div>
                    </div>

                    <div class="tool-section quiz-meta">
                        <div class="form-grid">
                            <label>ã‚¿ã‚¤ãƒˆãƒ«:</label>
                            <input type="text" id="quiz-title" required>
                            <label>ã‚«ãƒ†ã‚´ãƒª:</label>
                            <input type="text" id="quiz-category" list="category-suggestions" required>
                            <datalist id="category-suggestions"></datalist>
                            <label>é›£æ˜“åº¦:</label>
                            <input type="text" id="quiz-difficulty">
                            <label>èª¬æ˜æ–‡(ä¸€è¦§ç”¨):</label>
                            <div>
                                <textarea id="quiz-description" rows="2" placeholder="ã‚¯ã‚¤ã‚ºä¸€è¦§ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹çŸ­ã„èª¬æ˜"></textarea>
                            </div>
                            <label>è©³ç´°èª¬æ˜(é–‹å§‹ç”¨):</label>
                            <div>
                                <textarea id="quiz-detailed-description" rows="4"
                                    placeholder="ã‚¯ã‚¤ã‚ºé–‹å§‹ç›´å‰ã®ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹è©³ç´°ãªèª¬æ˜æ–‡"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="tool-section result-messages">
                        <h2>çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h2>
                        <div id="result-messages-container"></div>
                        <button type="button" id="add-result-message-btn">è¿½åŠ </button>
                    </div>

                    <div class="tool-section questions">
                        <h2>å•é¡Œãƒªã‚¹ãƒˆ (<span id="question-count">0</span>å•)</h2>
                        <div id="questions-container"></div>
                        <button type="button" id="add-question-btn">å•é¡Œã‚’è¿½åŠ </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Category Manager Tab -->
    <div id="category-manager" class="tab-content">
        <h2>ã‚«ãƒ†ã‚´ãƒªä¸¦ã³æ›¿ãˆ</h2>
        <p>ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ä¸¦ã³æ›¿ãˆã€ã¾ãŸã¯ãƒœã‚¿ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
        <ul id="category-list"></ul>
        <div style="margin-top: 10px;">
            <input type="text" id="new-category-input" placeholder="æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªå">
            <button id="add-category-btn">è¿½åŠ </button>
        </div>
        <div class="form-actions">
            <button id="save-categories-btn" class="primary-action">é †åºã‚’ä¿å­˜</button>
        </div>
    </div>

    <!-- Integrity Checker Tab -->
    <div id="integrity-checker" class="tab-content">
        <h2>æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯</h2>
        <button id="run-check-btn">ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ</button>
        <div id="check-results" style="margin-top: 20px;"></div>

        <div id="auto-fix-area" style="display: none; margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px;">
            <h3>è‡ªå‹•ä¿®å¾©</h3>
            <p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ã„ã¦ <code>quiz_list.json</code> ã‚’å†ç”Ÿæˆã—ã¾ã™ã€‚</p>
            <button id="fix-quiz-list-btn">quiz_list.jsonã‚’æ›´æ–°</button>
        </div>
    </div>

    <!-- Templates (Same as creator.html but adapted) -->
    <template id="question-template">
        <div class="question-block">
            <div class="question-header">
                <h3 class="question-title">å•é¡Œ</h3>
                <button type="button" class="delete-question-btn">å‰Šé™¤</button>
            </div>
            <div class="form-grid">
                <label>å•é¡Œæ–‡:</label>
                <textarea class="question-statement" rows="3" required></textarea>
                <label>ãƒ’ãƒ³ãƒˆ:</label>
                <input type="text" class="question-hint">
            </div>
            <h4>é¸æŠè‚¢</h4>
            <div class="options-container"></div>
            <button type="button" class="add-option-btn">é¸æŠè‚¢ã‚’è¿½åŠ </button>
        </div>
    </template>

    <template id="option-template">
        <div class="option-block">
            <input type="checkbox" class="correct-option-checkbox" title="æ­£è§£">
            <input type="text" class="option-text" placeholder="é¸æŠè‚¢" required>
            <textarea class="option-explanation" placeholder="è§£èª¬" rows="2" required></textarea>
            <button type="button" class="delete-option-btn">Ã—</button>
        </div>
    </template>

    <template id="result-message-template">
        <div class="result-message-block">
            <span>æ­£è§£ç‡</span>
            <input type="number" class="result-score" min="0" max="100" style="width: 60px;">
            <span>% (</span>
            <input type="number" class="result-count" min="0" step="1" style="width: 60px;">
            <span>å•) ä»¥ä¸Šã§:</span>
            <input type="text" class="result-message" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" style="flex: 1; margin-left: 10px;">
            <button type="button" class="delete-result-message-btn">Ã—</button>
        </div>
    </template>

    <script src="renderer.js"></script>
</body>

</html>